apply plugin: 'java'
apply plugin: 'application'

version = '3.3.0.1'
mainClassName  = "ch.specchio.gui.SPECCHIOApplication"
sourceCompatibility = 1.8
targetCompatibility = 1.8
compileJava.options.encoding = 'UTF-8'

repositories {
	jcenter()
    flatDir {
        dirs 'src/client/lib', 'src/types/lib'
    }
}

sourceSets {
    main {
        java {
            srcDir file('src/client/src')
            srcDir file('src/types/src')
        }
    }
}

task client(type: Jar) {
    description = 'Build Jar for SPECCIO Client'
    manifest {
        attributes 'Implementation-Title': 'Gradle Jar File Example',
            'Implementation-Version': version,
            'Main-Class': 'ch.specchio.gui.SPECCHIOApplication'
    }
    baseName = project.name + '-all'
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it)} }
    with jar
}

check.dependsOn client

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'src/client/lib')
    compile fileTree(include: ['*.jar'], dir: 'src/types/lib')
	compile group: 'org.apache.commons', name: 'commons-io', version: '1.3.2'
    compile group: 'net.iharder', name: 'base64', version: '2.3.8'
    compile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.0.1'
}
